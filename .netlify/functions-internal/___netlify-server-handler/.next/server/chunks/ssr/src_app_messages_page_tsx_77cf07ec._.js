module.exports=[26680,a=>{"use strict";var b=a.i(87924);a.i(11241);var c=a.i(96373),d=a.i(1322),e=a.i(68114),f=a.i(46271),g=a.i(45222),h=a.i(46842),i=a.i(38246);function j(){let a=(0,c.useQuery)(d.api.messages.listConversations),e=(0,c.useQuery)(d.api.users.getMe);return e?void 0===a?(0,b.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-6",children:[(0,b.jsx)("h1",{className:"font-display text-2xl font-bold mb-6",children:"Messages"}),Array.from({length:4}).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 animate-pulse",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-near-black/5"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)("div",{className:"h-4 w-1/3 bg-near-black/5 rounded"}),(0,b.jsx)("div",{className:"h-3 w-2/3 bg-near-black/5 rounded"})]})]},c))]}):(0,b.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-6",children:[(0,b.jsx)("h1",{className:"font-display text-2xl font-bold mb-6",children:"Messages"}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)(g.MessageCircle,{className:"w-16 h-16 text-hot-pink/20 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"font-display text-lg font-bold mb-2",children:"No messages yet"}),(0,b.jsx)("p",{className:"text-warm-gray text-sm",children:"Start a conversation by tapping “I Want This” on any listing."})]}):(0,b.jsx)("div",{className:"space-y-1",children:a.map((a,c)=>(0,b.jsx)(k,{conversation:a,currentUserId:e._id,index:c},a._id))})]}):(0,b.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-20 text-center",children:[(0,b.jsx)(g.MessageCircle,{className:"w-16 h-16 text-hot-pink/20 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"font-display text-xl font-bold mb-2",children:"Sign in to see your messages"}),(0,b.jsx)("p",{className:"text-warm-gray text-sm",children:"Start a conversation by tapping “I Want This” on any listing."})]})}function k({conversation:a,currentUserId:g,index:j}){let k=a.buyerId===g,l=k?a.sellerId:a.buyerId,m=(0,c.useQuery)(d.api.users.get,{id:l}),n=(0,c.useQuery)(d.api.listings.get,{id:a.listingId}),o=k?a.buyerUnread:a.sellerUnread;return(0,b.jsx)(f.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*j,duration:.3},children:(0,b.jsxs)(i.default,{href:`/messages/${a._id}`,className:"flex items-center gap-3 p-4 rounded-2xl hover:bg-white transition-colors group",children:[(0,b.jsxs)("div",{className:"relative w-12 h-12 rounded-full bg-hot-pink/10 flex items-center justify-center flex-shrink-0",children:[m?.avatarUrl?(0,b.jsx)("img",{src:m.avatarUrl,alt:"",className:"w-12 h-12 rounded-full"}):(0,b.jsx)(h.User,{className:"w-6 h-6 text-hot-pink"}),o>0&&(0,b.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-hot-pink text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o>9?"9+":o})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:`font-medium text-sm truncate ${o>0?"font-bold":""}`,children:m?.name??"Loading..."}),(0,b.jsx)("span",{className:"text-xs text-warm-gray ml-2 whitespace-nowrap",children:(0,e.formatTimeAgo)(a.lastMessageAt)})]}),n&&(0,b.jsx)("p",{className:"text-xs text-hot-pink truncate",children:n.title}),a.lastMessagePreview&&(0,b.jsx)("p",{className:`text-sm truncate ${o>0?"text-near-black":"text-warm-gray"}`,children:a.lastMessagePreview})]})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_app_messages_page_tsx_77cf07ec._.js.map