module.exports=[95386,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(50944),g=a.i(46271),h=a.i(86723),i=a.i(74290),j=a.i(1703),k=a.i(14800),l=a.i(91128),m=c,n=a.i(65802);function o(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class p extends m.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let a=b.offsetParent,c=(0,l.isHTMLElement)(a)&&a.offsetWidth||0,d=(0,l.isHTMLElement)(a)&&a.offsetHeight||0,e=this.props.sizeRef.current;e.height=b.offsetHeight||0,e.width=b.offsetWidth||0,e.top=b.offsetTop,e.left=b.offsetLeft,e.right=c-e.width-e.left,e.bottom=d-e.height-e.top}return null}componentDidUpdate(){}render(){return this.props.children}}function q({children:a,isPresent:d,anchorX:e,anchorY:f,root:g,pop:h}){let i=(0,m.useId)(),j=(0,m.useRef)(null),k=(0,m.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:l}=(0,m.useContext)(n.MotionConfigContext),q=function(...a){return c.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=o(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():o(a[b],null)}}}}(...a),a)}(j,a.props?.ref??a?.ref);return(0,m.useInsertionEffect)(()=>{let{width:a,height:b,top:c,left:m,right:n,bottom:o}=k.current;if(d||!1===h||!j.current||!a||!b)return;let p="left"===e?`left: ${m}`:`right: ${n}`,q="bottom"===f?`bottom: ${o}`:`top: ${c}`;j.current.dataset.motionPopId=i;let r=document.createElement("style");l&&(r.nonce=l);let s=g??document.head;return s.appendChild(r),r.sheet&&r.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${p}px !important;
            ${q}px !important;
          }
        `),()=>{s.contains(r)&&s.removeChild(r)}},[d]),(0,b.jsx)(p,{isPresent:d,childRef:j,sizeRef:k,pop:h,children:!1===h?a:m.cloneElement(a,{ref:q})})}let r=({children:a,initial:d,isPresent:e,onExitComplete:f,custom:g,presenceAffectsLayout:h,mode:j,anchorX:l,anchorY:m,root:n})=>{let o=(0,i.useConstant)(s),p=(0,c.useId)(),r=!0,t=(0,c.useMemo)(()=>(r=!1,{id:p,initial:d,isPresent:e,custom:g,onExitComplete:a=>{for(let b of(o.set(a,!0),o.values()))if(!b)return;f&&f()},register:a=>(o.set(a,!1),()=>o.delete(a))}),[e,o,f]);return h&&r&&(t={...t}),(0,c.useMemo)(()=>{o.forEach((a,b)=>o.set(b,!1))},[e]),c.useEffect(()=>{e||o.size||!f||f()},[e]),a=(0,b.jsx)(q,{pop:"popLayout"===j,isPresent:e,anchorX:l,anchorY:m,root:n,children:a}),(0,b.jsx)(k.PresenceContext.Provider,{value:t,children:a})};function s(){return new Map}var t=a.i(20410);let u=a=>a.key||"";function v(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}let w=({children:a,custom:d,initial:e=!0,onExitComplete:f,presenceAffectsLayout:g=!0,mode:k="sync",propagate:l=!1,anchorX:m="left",anchorY:n="top",root:o})=>{let[p,q]=(0,t.usePresence)(l),s=(0,c.useMemo)(()=>v(a),[a]),w=l&&!p?[]:s.map(u),x=(0,c.useRef)(!0),y=(0,c.useRef)(s),z=(0,i.useConstant)(()=>new Map),A=(0,c.useRef)(new Set),[B,C]=(0,c.useState)(s),[D,E]=(0,c.useState)(s);(0,j.useIsomorphicLayoutEffect)(()=>{x.current=!1,y.current=s;for(let a=0;a<D.length;a++){let b=u(D[a]);w.includes(b)?(z.delete(b),A.current.delete(b)):!0!==z.get(b)&&z.set(b,!1)}},[D,w.length,w.join("-")]);let F=[];if(s!==B){let a=[...s];for(let b=0;b<D.length;b++){let c=D[b],d=u(c);w.includes(d)||(a.splice(b,0,c),F.push(c))}return"wait"===k&&F.length&&(a=F),E(v(a)),C(s),null}let{forceRender:G}=(0,c.useContext)(h.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:D.map(a=>{let c=u(a),h=(!l||!!p)&&(s===D||w.includes(c));return(0,b.jsx)(r,{isPresent:h,initial:(!x.current||!!e)&&void 0,custom:d,presenceAffectsLayout:g,mode:k,root:o,onExitComplete:h?void 0:()=>{if(A.current.has(c)||(A.current.add(c),!z.has(c)))return;z.set(c,!0);let a=!0;z.forEach(b=>{b||(a=!1)}),a&&(G?.(),E(y.current),l&&q?.(),f&&f())},anchorX:m,anchorY:n,children:a},c)})})};var x=a.i(68114),y=a.i(210),z=a.i(70106);let A=(0,z.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),B=(0,z.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var C=a.i(33508);let D=(0,z.default)("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);var E=a.i(24987),F=a.i(33350),G=a.i(8406);let H=(0,z.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var I=a.i(76472);let J=["Photos","Details","Story","Price","Preview"],K=["What's the story behind this item?","The pettier, the better.","Did they forget it? Did you throw it out the window?","We're all ears. Let it out."];function L(){let a=(0,f.useRouter)(),h=(0,d.useQuery)(e.api.users.getMe),i=(0,d.useMutation)(e.api.listings.create),[j,k]=(0,c.useState)(0),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,z]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(!1),T=()=>{switch(j){case 0:case 2:case 4:return!0;case 1:return n.trim()&&r&&t&&v;case 3:return P||N&&Number(N)>0;default:return!1}},U=(0,c.useCallback)(async()=>{if(!h)return void alert("Please sign in to post a listing!");S(!0);try{let b=await i({title:n.trim(),description:p.trim(),story:L.trim()||void 0,price:P?0:Math.round(100*Number(N)),photos:l,category:r,area:t,condition:v});a.push(`/listing/${b}`)}catch(a){alert(a.message||"Something went wrong"),S(!1)}},[h,i,n,p,L,P,N,l,r,t,v,a]);return(0,b.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-6 md:py-10",children:[(0,b.jsx)("div",{className:"flex items-center gap-1 mb-8",children:J.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center flex-1",children:[(0,b.jsxs)("button",{onClick:()=>c<j&&k(c),className:`flex items-center gap-1.5 text-xs font-medium transition-colors ${c===j?"text-hot-pink":c<j?"text-teal cursor-pointer":"text-warm-gray/40"}`,children:[(0,b.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold transition-all duration-300 ${c===j?"bg-hot-pink text-white scale-110":c<j?"bg-teal text-white":"bg-near-black/5 text-warm-gray/40"}`,children:c<j?(0,b.jsx)(B,{className:"w-3 h-3"}):c+1}),(0,b.jsx)("span",{className:"hidden sm:inline",children:a})]}),c<J.length-1&&(0,b.jsx)("div",{className:`flex-1 h-0.5 mx-2 rounded-full transition-colors ${c<j?"bg-teal":"bg-near-black/5"}`})]},a))}),(0,b.jsx)(w,{mode:"wait",children:(0,b.jsxs)(g.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.25},children:[0===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-display text-2xl font-bold mb-1",children:"Add some photos"}),(0,b.jsx)("p",{className:"text-warm-gray text-sm mb-6",children:"Show off what you're selling. Up to 5 photos."}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[l.map((a,c)=>(0,b.jsxs)("div",{className:"relative aspect-square rounded-xl overflow-hidden bg-near-black/5",children:[(0,b.jsx)("img",{src:a,alt:"",className:"w-full h-full object-cover"}),(0,b.jsx)("button",{onClick:()=>m(l.filter((a,b)=>b!==c)),className:"absolute top-2 right-2 w-6 h-6 bg-near-black/60 text-white rounded-full flex items-center justify-center hover:bg-near-black/80",children:(0,b.jsx)(C.X,{className:"w-3 h-3"})})]},c)),l.length<5&&(0,b.jsxs)("button",{className:"aspect-square rounded-xl border-2 border-dashed border-near-black/10 hover:border-hot-pink/30 flex flex-col items-center justify-center gap-1.5 transition-colors group",children:[(0,b.jsx)(D,{className:"w-8 h-8 text-warm-gray/40 group-hover:text-hot-pink/60 transition-colors"}),(0,b.jsx)("span",{className:"text-xs text-warm-gray/40 group-hover:text-hot-pink/60 transition-colors",children:"Add photo"})]})]}),(0,b.jsx)("p",{className:"text-warm-gray/60 text-xs mt-4 text-center",children:"Photo upload coming soon — listings will work without photos for now"})]}),1===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-display text-2xl font-bold mb-1",children:"Item details"}),(0,b.jsx)("p",{className:"text-warm-gray text-sm mb-6",children:"What are you getting rid of?"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"Title"}),(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),placeholder:"e.g., PS5 + 12 Games Bundle",className:"w-full px-4 py-3 bg-white rounded-xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-sm",maxLength:100})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"Description"}),(0,b.jsx)("textarea",{value:p,onChange:a=>q(a.target.value),placeholder:"Details about the item — condition, what's included, etc.",rows:3,className:"w-full px-4 py-3 bg-white rounded-xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-sm resize-none",maxLength:1e3})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[(0,b.jsx)(F.Tag,{className:"w-3.5 h-3.5"})," Category"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:x.CATEGORIES.filter(a=>"All"!==a).map(a=>(0,b.jsx)("button",{onClick:()=>s(a),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${r===a?"bg-hot-pink text-white shadow-sm":"bg-white text-warm-gray border border-near-black/10 hover:border-hot-pink/30"}`,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[(0,b.jsx)(E.MapPin,{className:"w-3.5 h-3.5"})," Village"]}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"w-full px-4 py-3 bg-white rounded-xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-sm appearance-none",children:[(0,b.jsx)("option",{value:"",children:"Select your village"}),x.AREAS.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"Condition"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:x.CONDITIONS.map(a=>(0,b.jsx)("button",{onClick:()=>z(a),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${v===a?"bg-teal text-white shadow-sm":"bg-white text-warm-gray border border-near-black/10 hover:border-teal/30"}`,children:a},a))})]})]})]}),2===j&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(G.Sparkles,{className:"w-5 h-5 text-hot-pink"}),(0,b.jsx)("h2",{className:"font-display text-2xl font-bold",children:"The Story"})]}),(0,b.jsxs)("p",{className:"text-warm-gray text-sm mb-6",children:["This is what makes ExChange special. ",K[Math.floor(Math.random()*K.length)]]}),(0,b.jsx)("textarea",{value:L,onChange:a=>M(a.target.value),placeholder:"He said he needed 'space to figure things out.' Guess what doesn't need space anymore? His gaming setup...",rows:8,className:"w-full px-4 py-3 bg-white rounded-xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-sm resize-none leading-relaxed",maxLength:2e3}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-warm-gray",children:[(0,b.jsx)("span",{children:"Optional, but highly encouraged"}),(0,b.jsxs)("span",{className:L.length>1800?"text-hot-pink":"",children:[L.length,"/2000"]})]})]}),3===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-display text-2xl font-bold mb-1",children:"Set your price"}),(0,b.jsx)("p",{className:"text-warm-gray text-sm mb-6",children:"How much is this closure worth?"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(H,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-warm-gray"}),(0,b.jsx)("input",{type:"number",value:N,onChange:a=>{O(a.target.value),Q(!1)},placeholder:"0.00",disabled:P,className:"w-full pl-12 pr-4 py-4 bg-white rounded-2xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-2xl font-display font-bold disabled:opacity-30",min:"0",step:"1"})]}),(0,b.jsxs)("button",{onClick:()=>{Q(!P),P||O("")},className:`w-full p-4 rounded-2xl border-2 text-left transition-all ${P?"border-teal bg-teal/5":"border-near-black/10 hover:border-teal/30"}`,children:[(0,b.jsx)("span",{className:`font-display font-bold ${P?"text-teal":"text-near-black"}`,children:"Free — just take it"}),(0,b.jsx)("p",{className:"text-xs text-warm-gray mt-0.5",children:"Sometimes the best revenge is giving it away"})]})]})]}),4===j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-display text-2xl font-bold mb-1",children:"Preview"}),(0,b.jsx)("p",{className:"text-warm-gray text-sm mb-6",children:"Here's how your listing will look"}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-near-black/5 overflow-hidden",children:[(0,b.jsx)("div",{className:"aspect-[4/3] bg-gradient-to-br from-hot-pink/10 to-electric-yellow/10 flex items-center justify-center",children:l.length>0?(0,b.jsx)("img",{src:l[0],alt:"",className:"w-full h-full object-cover"}):(0,b.jsx)(I.Heart,{className:"w-16 h-16 text-hot-pink/20"})}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,b.jsx)("h3",{className:"font-display font-bold text-lg",children:n||"Your listing title"}),(0,b.jsx)("span",{className:"font-display font-bold text-hot-pink text-lg",children:P?"Free":N?`$${N}`:"$0"})]}),L&&(0,b.jsxs)("p",{className:"text-warm-gray text-sm italic leading-relaxed mb-3",children:["“",L.slice(0,120),L.length>120?"...":"","”"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-warm-gray",children:[t&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(E.MapPin,{className:"w-3 h-3"})," ",t]}),r&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Tag,{className:"w-3 h-3"})," ",r]}),v&&(0,b.jsx)("span",{children:v})]})]})]})]})]},j)}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-8",children:[j>0&&(0,b.jsx)("button",{onClick:()=>k(j-1),className:"px-5 py-3 rounded-xl border border-near-black/10 text-warm-gray font-medium hover:text-near-black hover:border-near-black/20 transition-colors",children:(0,b.jsx)(y.ArrowLeft,{className:"w-4 h-4"})}),j<J.length-1?(0,b.jsxs)("button",{onClick:()=>k(j+1),disabled:!T(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-near-black text-white rounded-xl font-display font-bold hover:bg-deep-charcoal disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:["Next ",(0,b.jsx)(A,{className:"w-4 h-4"})]}):(0,b.jsx)("button",{onClick:U,disabled:R||!T(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-hot-pink text-white rounded-xl font-display font-bold text-lg shadow-lg shadow-hot-pink/25 hover:bg-hot-pink-dark hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:R?(0,b.jsx)("span",{className:"animate-pulse",children:"Publishing..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(G.Sparkles,{className:"w-5 h-5"})," Publish Listing"]})})]})]})}a.s(["default",()=>L],95386)}];

//# sourceMappingURL=src_app_sell_page_tsx_49f8110c._.js.map