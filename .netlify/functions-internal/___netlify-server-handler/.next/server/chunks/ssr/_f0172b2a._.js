module.exports=[76472,a=>{"use strict";let b=(0,a.i(70106).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);a.s(["Heart",()=>b],76472)},24987,a=>{"use strict";let b=(0,a.i(70106).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},41710,1027,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]);a.s(["Clock",()=>c],41710);let d=(0,b.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);a.s(["Zap",()=>d],1027)},99464,a=>{"use strict";let b=(0,a.i(70106).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);a.s(["Pencil",()=>b],99464)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},33350,a=>{"use strict";let b=(0,a.i(70106).default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);a.s(["Tag",()=>b],33350)},67820,a=>{"use strict";var b=a.i(87924),c=a.i(50944);a.i(11241);var d=a.i(96373),e=a.i(1322),f=a.i(68114),g=a.i(46271),h=a.i(210),i=a.i(24987),j=a.i(41710),k=a.i(33350),l=a.i(70106);let m=(0,l.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var n=a.i(76472),o=a.i(45222);let p=(0,l.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),q=(0,l.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var r=a.i(1027);let s=(0,l.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var t=a.i(99464);let u=(0,l.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var v=a.i(46842),w=a.i(72131),x=a.i(38246);function y(){let a=(0,c.useParams)(),l=(0,c.useRouter)(),y=a.id,z=(0,d.useQuery)(e.api.listings.get,{id:y}),A=(0,d.useQuery)(e.api.users.getMe),B=(0,d.useQuery)(e.api.users.get,z?{id:z.sellerId}:"skip"),C=(0,d.useQuery)(e.api.users.getListingCount,z?{userId:z.sellerId}:"skip"),D=(0,d.useMutation)(e.api.listings.incrementView),E=(0,d.useMutation)(e.api.messages.getOrCreateConversation),[F,G]=(0,w.useState)(0);(0,w.useEffect)(()=>{z&&D({id:y})},[y]);let H=(0,w.useCallback)(async()=>{if(!A)return void alert("Sign in to message the seller!");try{let a=await E({listingId:y});l.push(`/messages/${a}`)}catch(a){alert(a.message)}},[A,E,y,l]),I=(0,w.useCallback)(async()=>{let a=window.location.href;navigator.share?await navigator.share({title:z?.title??"ExChange",text:z?.story?`"${z.story.slice(0,100)}..."`:void 0,url:a}):(await navigator.clipboard.writeText(a),alert("Link copied!"))},[z]);if(void 0===z)return(0,b.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 w-24 bg-near-black/5 rounded-xl"}),(0,b.jsx)("div",{className:"aspect-[4/3] bg-near-black/5 rounded-2xl"}),(0,b.jsx)("div",{className:"h-8 w-3/4 bg-near-black/5 rounded-xl"}),(0,b.jsx)("div",{className:"h-6 w-1/4 bg-near-black/5 rounded-xl"}),(0,b.jsx)("div",{className:"h-32 bg-near-black/5 rounded-2xl"})]})});if(!z)return(0,b.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-20 text-center",children:[(0,b.jsx)("h2",{className:"font-display text-2xl font-bold mb-2",children:"This one got away."}),(0,b.jsx)("p",{className:"text-warm-gray mb-6",children:"This listing has moved on to better things. Just like you should."}),(0,b.jsxs)(x.default,{href:"/",className:"inline-flex items-center gap-2 px-5 py-2.5 bg-hot-pink text-white rounded-xl font-semibold hover:bg-hot-pink-dark transition-colors",children:[(0,b.jsx)(h.ArrowLeft,{className:"w-4 h-4"})," Back to browsing"]})]});let J=A&&B&&A._id===B._id,K="sold"===z.status,L=z.featured&&z.featuredUntil&&z.featuredUntil>Date.now();return(0,b.jsxs)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"max-w-3xl mx-auto px-4 md:px-6 py-4 md:py-8",children:[(0,b.jsxs)("button",{onClick:()=>l.back(),className:"flex items-center gap-1.5 text-warm-gray hover:text-near-black mb-4 transition-colors text-sm",children:[(0,b.jsx)(h.ArrowLeft,{className:"w-4 h-4"})," Back"]}),(0,b.jsxs)("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden bg-near-black/5 mb-6",children:[z.photos.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("img",{src:z.photos[F],alt:z.title,className:"w-full h-full object-cover"}),z.photos.length>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>G(a=>a>0?a-1:z.photos.length-1),className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg",children:(0,b.jsx)(p,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>G(a=>a<z.photos.length-1?a+1:0),className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg",children:(0,b.jsx)(q,{className:"w-5 h-5"})}),(0,b.jsx)("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5",children:z.photos.map((a,c)=>(0,b.jsx)("button",{onClick:()=>G(c),className:`w-2 h-2 rounded-full transition-all ${c===F?"bg-white w-6":"bg-white/50"}`},c))})]})]}):(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-hot-pink/10 to-electric-yellow/10 flex items-center justify-center",children:(0,b.jsx)(n.Heart,{className:"w-20 h-20 text-hot-pink/20"})}),K&&(0,b.jsx)("div",{className:"absolute inset-0 bg-deep-charcoal/60 flex items-center justify-center",children:(0,b.jsx)("span",{className:"font-display text-3xl font-bold text-white -rotate-12",children:"Gone. Just like they are."})}),L&&!K&&(0,b.jsxs)("div",{className:"absolute top-4 left-4 px-3 py-1.5 bg-electric-yellow text-near-black text-sm font-bold rounded-full flex items-center gap-1 shadow-lg",children:[(0,b.jsx)(r.Zap,{className:"w-4 h-4"})," Boosted"]})]}),(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"font-display text-2xl md:text-3xl font-bold tracking-tight",children:z.title}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-sm text-warm-gray",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.Tag,{className:"w-3.5 h-3.5"})," ",z.category]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(i.MapPin,{className:"w-3.5 h-3.5"})," ",z.area]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(j.Clock,{className:"w-3.5 h-3.5"})," ",(0,f.formatTimeAgo)(z.createdAt)]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(u,{className:"w-3.5 h-3.5"})," ",z.viewCount," views"]})]})]}),(0,b.jsx)("span",{className:"font-display text-2xl md:text-3xl font-bold text-hot-pink whitespace-nowrap",children:(0,f.formatPrice)(z.price)})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${"New"===z.condition||"Like New"===z.condition?"bg-teal/10 text-teal":"Good"===z.condition?"bg-electric-yellow/20 text-near-black":"Fair"===z.condition?"bg-warm-gray/10 text-warm-gray":"bg-hot-pink/10 text-hot-pink"}`,children:z.condition})}),z.story&&(0,b.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.4},className:"relative mb-8 p-6 bg-gradient-to-br from-hot-pink/5 via-warm-white to-electric-yellow/5 rounded-2xl border border-hot-pink/10",children:[(0,b.jsx)("div",{className:"absolute -top-3 left-6 px-3 py-1 bg-hot-pink text-white text-xs font-bold rounded-full",children:"The Story"}),(0,b.jsxs)("p",{className:"text-near-black leading-relaxed text-base md:text-lg mt-2 italic",children:["“",z.story,"”"]})]}),z.description&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h3",{className:"font-display font-bold text-sm text-warm-gray uppercase tracking-wider mb-2",children:"Details"}),(0,b.jsx)("p",{className:"text-near-black leading-relaxed",children:z.description})]}),B&&(0,b.jsxs)(x.default,{href:`/profile/${B._id}`,className:"flex items-center gap-4 p-4 bg-white rounded-2xl border border-near-black/5 hover:border-hot-pink/20 transition-colors mb-8",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-hot-pink/10 flex items-center justify-center",children:B.avatarUrl?(0,b.jsx)("img",{src:B.avatarUrl,alt:"",className:"w-12 h-12 rounded-full"}):(0,b.jsx)(v.User,{className:"w-6 h-6 text-hot-pink"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-display font-bold truncate",children:B.name}),(0,b.jsxs)("p",{className:"text-xs text-warm-gray",children:[C??0," listing",(C??0)!==1?"s":""," · Member since ",new Date(B.createdAt).toLocaleDateString("en-US",{month:"short",year:"numeric"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[J?(0,b.jsxs)(x.default,{href:"/dashboard",className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-near-black text-white rounded-2xl font-display font-bold hover:bg-deep-charcoal transition-colors",children:[(0,b.jsx)(t.Pencil,{className:"w-5 h-5"})," Edit Listing"]}):(0,b.jsxs)("button",{onClick:H,disabled:K,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-hot-pink text-white rounded-2xl font-display font-bold text-lg shadow-lg shadow-hot-pink/25 hover:bg-hot-pink-dark hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:[(0,b.jsx)(o.MessageCircle,{className:"w-5 h-5"})," I Want This"]}),(0,b.jsx)("button",{onClick:I,className:"p-3.5 bg-white rounded-2xl border border-near-black/10 hover:border-hot-pink/20 hover:text-hot-pink transition-colors",children:(0,b.jsx)(m,{className:"w-5 h-5"})}),!J&&(0,b.jsx)("button",{className:"p-3.5 bg-white rounded-2xl border border-near-black/10 hover:border-red-300 hover:text-red-500 transition-colors",children:(0,b.jsx)(s,{className:"w-5 h-5"})})]})]})}a.s(["default",()=>y],67820)}];

//# sourceMappingURL=_f0172b2a._.js.map