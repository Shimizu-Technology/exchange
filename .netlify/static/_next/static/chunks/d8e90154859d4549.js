(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90597,e=>{"use strict";let t=(0,e.i(75254).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>t],90597)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},3116,39312,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]);e.s(["Clock",()=>a],3116);let s=(0,t.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>s],39312)},88699,e=>{"use strict";let t=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],88699)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},51975,e=>{"use strict";let t=(0,e.i(75254).default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>t],51975)},71198,e=>{"use strict";var t=e.i(43476),a=e.i(18566);e.i(50711);var s=e.i(82045),l=e.i(83394),i=e.i(75157),r=e.i(46932),n=e.i(71689),c=e.i(46897),o=e.i(3116),d=e.i(51975),x=e.i(75254);let h=(0,x.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var m=e.i(90597),p=e.i(94983);let u=(0,x.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),b=(0,x.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var g=e.i(39312);let f=(0,x.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var y=e.i(88699);let w=(0,x.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var k=e.i(84614),j=e.i(71645),v=e.i(22016);function N(){let e=(0,a.useParams)(),x=(0,a.useRouter)(),N=e.id,C=(0,s.useQuery)(l.api.listings.get,{id:N}),M=(0,s.useQuery)(l.api.users.getMe),A=(0,s.useQuery)(l.api.users.get,C?{id:C.sellerId}:"skip"),T=(0,s.useQuery)(l.api.users.getListingCount,C?{userId:C.sellerId}:"skip"),L=(0,s.useMutation)(l.api.listings.incrementView),q=(0,s.useMutation)(l.api.messages.getOrCreateConversation),[z,P]=(0,j.useState)(0);(0,j.useEffect)(()=>{C&&L({id:N})},[N]);let U=(0,j.useCallback)(async()=>{if(!M)return void alert("Sign in to message the seller!");try{let e=await q({listingId:N});x.push(`/messages/${e}`)}catch(e){alert(e.message)}},[M,q,N,x]),S=(0,j.useCallback)(async()=>{let e=window.location.href;navigator.share?await navigator.share({title:C?.title??"ExChange",text:C?.story?`"${C.story.slice(0,100)}..."`:void 0,url:e}):(await navigator.clipboard.writeText(e),alert("Link copied!"))},[C]);if(void 0===C)return(0,t.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 w-24 bg-near-black/5 rounded-xl"}),(0,t.jsx)("div",{className:"aspect-[4/3] bg-near-black/5 rounded-2xl"}),(0,t.jsx)("div",{className:"h-8 w-3/4 bg-near-black/5 rounded-xl"}),(0,t.jsx)("div",{className:"h-6 w-1/4 bg-near-black/5 rounded-xl"}),(0,t.jsx)("div",{className:"h-32 bg-near-black/5 rounded-2xl"})]})});if(!C)return(0,t.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-20 text-center",children:[(0,t.jsx)("h2",{className:"font-display text-2xl font-bold mb-2",children:"This one got away."}),(0,t.jsx)("p",{className:"text-warm-gray mb-6",children:"This listing has moved on to better things. Just like you should."}),(0,t.jsxs)(v.default,{href:"/",className:"inline-flex items-center gap-2 px-5 py-2.5 bg-hot-pink text-white rounded-xl font-semibold hover:bg-hot-pink-dark transition-colors",children:[(0,t.jsx)(n.ArrowLeft,{className:"w-4 h-4"})," Back to browsing"]})]});let B=M&&A&&M._id===A._id,$="sold"===C.status,D=C.featured&&C.featuredUntil&&C.featuredUntil>Date.now();return(0,t.jsxs)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"max-w-3xl mx-auto px-4 md:px-6 py-4 md:py-8",children:[(0,t.jsxs)("button",{onClick:()=>x.back(),className:"flex items-center gap-1.5 text-warm-gray hover:text-near-black mb-4 transition-colors text-sm",children:[(0,t.jsx)(n.ArrowLeft,{className:"w-4 h-4"})," Back"]}),(0,t.jsxs)("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden bg-near-black/5 mb-6",children:[C.photos.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:C.photos[z],alt:C.title,className:"w-full h-full object-cover"}),C.photos.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>P(e=>e>0?e-1:C.photos.length-1),className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg",children:(0,t.jsx)(u,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>P(e=>e<C.photos.length-1?e+1:0),className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg",children:(0,t.jsx)(b,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5",children:C.photos.map((e,a)=>(0,t.jsx)("button",{onClick:()=>P(a),className:`w-2 h-2 rounded-full transition-all ${a===z?"bg-white w-6":"bg-white/50"}`},a))})]})]}):(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-hot-pink/10 to-electric-yellow/10 flex items-center justify-center",children:(0,t.jsx)(m.Heart,{className:"w-20 h-20 text-hot-pink/20"})}),$&&(0,t.jsx)("div",{className:"absolute inset-0 bg-deep-charcoal/60 flex items-center justify-center",children:(0,t.jsx)("span",{className:"font-display text-3xl font-bold text-white -rotate-12",children:"Gone. Just like they are."})}),D&&!$&&(0,t.jsxs)("div",{className:"absolute top-4 left-4 px-3 py-1.5 bg-electric-yellow text-near-black text-sm font-bold rounded-full flex items-center gap-1 shadow-lg",children:[(0,t.jsx)(g.Zap,{className:"w-4 h-4"})," Boosted"]})]}),(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-display text-2xl md:text-3xl font-bold tracking-tight",children:C.title}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-sm text-warm-gray",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Tag,{className:"w-3.5 h-3.5"})," ",C.category]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.MapPin,{className:"w-3.5 h-3.5"})," ",C.area]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(o.Clock,{className:"w-3.5 h-3.5"})," ",(0,i.formatTimeAgo)(C.createdAt)]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(w,{className:"w-3.5 h-3.5"})," ",C.viewCount," views"]})]})]}),(0,t.jsx)("span",{className:"font-display text-2xl md:text-3xl font-bold text-hot-pink whitespace-nowrap",children:(0,i.formatPrice)(C.price)})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${"New"===C.condition||"Like New"===C.condition?"bg-teal/10 text-teal":"Good"===C.condition?"bg-electric-yellow/20 text-near-black":"Fair"===C.condition?"bg-warm-gray/10 text-warm-gray":"bg-hot-pink/10 text-hot-pink"}`,children:C.condition})}),C.story&&(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.4},className:"relative mb-8 p-6 bg-gradient-to-br from-hot-pink/5 via-warm-white to-electric-yellow/5 rounded-2xl border border-hot-pink/10",children:[(0,t.jsx)("div",{className:"absolute -top-3 left-6 px-3 py-1 bg-hot-pink text-white text-xs font-bold rounded-full",children:"The Story"}),(0,t.jsxs)("p",{className:"text-near-black leading-relaxed text-base md:text-lg mt-2 italic",children:["“",C.story,"”"]})]}),C.description&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h3",{className:"font-display font-bold text-sm text-warm-gray uppercase tracking-wider mb-2",children:"Details"}),(0,t.jsx)("p",{className:"text-near-black leading-relaxed",children:C.description})]}),A&&(0,t.jsxs)(v.default,{href:`/profile/${A._id}`,className:"flex items-center gap-4 p-4 bg-white rounded-2xl border border-near-black/5 hover:border-hot-pink/20 transition-colors mb-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-hot-pink/10 flex items-center justify-center",children:A.avatarUrl?(0,t.jsx)("img",{src:A.avatarUrl,alt:"",className:"w-12 h-12 rounded-full"}):(0,t.jsx)(k.User,{className:"w-6 h-6 text-hot-pink"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-display font-bold truncate",children:A.name}),(0,t.jsxs)("p",{className:"text-xs text-warm-gray",children:[T??0," listing",(T??0)!==1?"s":""," · Member since ",new Date(A.createdAt).toLocaleDateString("en-US",{month:"short",year:"numeric"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[B?(0,t.jsxs)(v.default,{href:"/dashboard",className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-near-black text-white rounded-2xl font-display font-bold hover:bg-deep-charcoal transition-colors",children:[(0,t.jsx)(y.Pencil,{className:"w-5 h-5"})," Edit Listing"]}):(0,t.jsxs)("button",{onClick:U,disabled:$,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-hot-pink text-white rounded-2xl font-display font-bold text-lg shadow-lg shadow-hot-pink/25 hover:bg-hot-pink-dark hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:[(0,t.jsx)(p.MessageCircle,{className:"w-5 h-5"})," I Want This"]}),(0,t.jsx)("button",{onClick:S,className:"p-3.5 bg-white rounded-2xl border border-near-black/10 hover:border-hot-pink/20 hover:text-hot-pink transition-colors",children:(0,t.jsx)(h,{className:"w-5 h-5"})}),!B&&(0,t.jsx)("button",{className:"p-3.5 bg-white rounded-2xl border border-near-black/10 hover:border-red-300 hover:text-red-500 transition-colors",children:(0,t.jsx)(f,{className:"w-5 h-5"})})]})]})}e.s(["default",()=>N],71198)}]);