(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90597,e=>{"use strict";let t=(0,e.i(75254).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>t],90597)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},51975,e=>{"use strict";let t=(0,e.i(75254).default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>t],51975)},5857,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(50711);var a=e.i(82045),l=e.i(83394),r=e.i(18566),i=e.i(46932);e.i(47167);var n=e.i(31178),o=e.i(47414),c=e.i(74008),d=e.i(21476),h=e.i(72846),u=s,x=e.i(37806);function m(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class p extends u.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,s=(0,h.isHTMLElement)(e)&&e.offsetWidth||0,a=(0,h.isHTMLElement)(e)&&e.offsetHeight||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left,l.bottom=a-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function f({children:e,isPresent:a,anchorX:l,anchorY:r,root:i,pop:n}){let o=(0,u.useId)(),c=(0,u.useRef)(null),d=(0,u.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=(0,u.useContext)(x.MotionConfigContext),f=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,a=e.map(e=>{let a=m(e,t);return s||"function"!=typeof a||(s=!0),a});if(s)return()=>{for(let t=0;t<a.length;t++){let s=a[t];"function"==typeof s?s():m(e[t],null)}}}}(...e),e)}(c,e.props?.ref??e?.ref);return(0,u.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:u,right:x,bottom:m}=d.current;if(a||!1===n||!c.current||!e||!t)return;let p="left"===l?`left: ${u}`:`right: ${x}`,f="bottom"===r?`bottom: ${m}`:`top: ${s}`;c.current.dataset.motionPopId=o;let g=document.createElement("style");h&&(g.nonce=h);let b=i??document.head;return b.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${p}px !important;
            ${f}px !important;
          }
        `),()=>{b.contains(g)&&b.removeChild(g)}},[a]),(0,t.jsx)(p,{isPresent:a,childRef:c,sizeRef:d,pop:n,children:!1===n?e:u.cloneElement(e,{ref:f})})}let g=({children:e,initial:a,isPresent:l,onExitComplete:r,custom:i,presenceAffectsLayout:n,mode:c,anchorX:h,anchorY:u,root:x})=>{let m=(0,o.useConstant)(b),p=(0,s.useId)(),g=!0,y=(0,s.useMemo)(()=>(g=!1,{id:p,initial:a,isPresent:l,custom:i,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;r&&r()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[l,m,r]);return n&&g&&(y={...y}),(0,s.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[l]),s.useEffect(()=>{l||m.size||!r||r()},[l]),e=(0,t.jsx)(f,{pop:"popLayout"===c,isPresent:l,anchorX:h,anchorY:u,root:x,children:e}),(0,t.jsx)(d.PresenceContext.Provider,{value:y,children:e})};function b(){return new Map}var y=e.i(64978);let j=e=>e.key||"";function w(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let k=({children:e,custom:a,initial:l=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:d="sync",propagate:h=!1,anchorX:u="left",anchorY:x="top",root:m})=>{let[p,f]=(0,y.usePresence)(h),b=(0,s.useMemo)(()=>w(e),[e]),k=h&&!p?[]:b.map(j),v=(0,s.useRef)(!0),N=(0,s.useRef)(b),C=(0,o.useConstant)(()=>new Map),S=(0,s.useRef)(new Set),[M,P]=(0,s.useState)(b),[$,E]=(0,s.useState)(b);(0,c.useIsomorphicLayoutEffect)(()=>{v.current=!1,N.current=b;for(let e=0;e<$.length;e++){let t=j($[e]);k.includes(t)?(C.delete(t),S.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[$,k.length,k.join("-")]);let L=[];if(b!==M){let e=[...b];for(let t=0;t<$.length;t++){let s=$[t],a=j(s);k.includes(a)||(e.splice(t,0,s),L.push(s))}return"wait"===d&&L.length&&(e=L),E(w(e)),P(b),null}let{forceRender:T}=(0,s.useContext)(n.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:$.map(e=>{let s=j(e),n=(!h||!!p)&&(b===$||k.includes(s));return(0,t.jsx)(g,{isPresent:n,initial:(!v.current||!!l)&&void 0,custom:a,presenceAffectsLayout:i,mode:d,root:m,onExitComplete:n?void 0:()=>{if(S.current.has(s)||(S.current.add(s),!C.has(s)))return;C.set(s,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(T?.(),E(N.current),h&&f?.(),r&&r())},anchorX:u,anchorY:x,children:e},s)})})};var v=e.i(75157),N=e.i(71689),C=e.i(75254);let S=(0,C.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),M=(0,C.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var P=e.i(37727);let $=(0,C.default)("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);var E=e.i(46897),L=e.i(51975),T=e.i(83086);let H=(0,C.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var R=e.i(90597);let A=["Photos","Details","Story","Price","Preview"],z=["What's the story behind this item?","The pettier, the better.","Did they forget it? Did you throw it out the window?","We're all ears. Let it out."];function I(){let e=(0,r.useRouter)(),n=(0,a.useQuery)(l.api.users.getMe),o=(0,a.useMutation)(l.api.listings.create),[c,d]=(0,s.useState)(0),[h,u]=(0,s.useState)([]),[x,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[w,C]=(0,s.useState)(""),[I,q]=(0,s.useState)(""),[D,O]=(0,s.useState)(""),[U,W]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),G=()=>{switch(c){case 0:case 2:case 4:return!0;case 1:return x.trim()&&g&&y&&w;case 3:return U||D&&Number(D)>0;default:return!1}},V=(0,s.useCallback)(async()=>{if(!n)return void alert("Please sign in to post a listing!");F(!0);try{let t=await o({title:x.trim(),description:p.trim(),story:I.trim()||void 0,price:U?0:Math.round(100*Number(D)),photos:h,category:g,area:y,condition:w});e.push(`/listing/${t}`)}catch(e){alert(e.message||"Something went wrong"),F(!1)}},[n,o,x,p,I,U,D,h,g,y,w,e]);return(0,t.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-6 md:py-10",children:[(0,t.jsx)("div",{className:"flex items-center gap-1 mb-8",children:A.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center flex-1",children:[(0,t.jsxs)("button",{onClick:()=>s<c&&d(s),className:`flex items-center gap-1.5 text-xs font-medium transition-colors ${s===c?"text-hot-pink":s<c?"text-teal cursor-pointer":"text-warm-gray/40"}`,children:[(0,t.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold transition-all duration-300 ${s===c?"bg-hot-pink text-white scale-110":s<c?"bg-teal text-white":"bg-near-black/5 text-warm-gray/40"}`,children:s<c?(0,t.jsx)(M,{className:"w-3 h-3"}):s+1}),(0,t.jsx)("span",{className:"hidden sm:inline",children:e})]}),s<A.length-1&&(0,t.jsx)("div",{className:`flex-1 h-0.5 mx-2 rounded-full transition-colors ${s<c?"bg-teal":"bg-near-black/5"}`})]},e))}),(0,t.jsx)(k,{mode:"wait",children:(0,t.jsxs)(i.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.25},children:[0===c&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-display text-2xl font-bold mb-1",children:"Add some photos"}),(0,t.jsx)("p",{className:"text-warm-gray text-sm mb-6",children:"Show off what you're selling. Up to 5 photos."}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[h.map((e,s)=>(0,t.jsxs)("div",{className:"relative aspect-square rounded-xl overflow-hidden bg-near-black/5",children:[(0,t.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{onClick:()=>u(h.filter((e,t)=>t!==s)),className:"absolute top-2 right-2 w-6 h-6 bg-near-black/60 text-white rounded-full flex items-center justify-center hover:bg-near-black/80",children:(0,t.jsx)(P.X,{className:"w-3 h-3"})})]},s)),h.length<5&&(0,t.jsxs)("button",{className:"aspect-square rounded-xl border-2 border-dashed border-near-black/10 hover:border-hot-pink/30 flex flex-col items-center justify-center gap-1.5 transition-colors group",children:[(0,t.jsx)($,{className:"w-8 h-8 text-warm-gray/40 group-hover:text-hot-pink/60 transition-colors"}),(0,t.jsx)("span",{className:"text-xs text-warm-gray/40 group-hover:text-hot-pink/60 transition-colors",children:"Add photo"})]})]}),(0,t.jsx)("p",{className:"text-warm-gray/60 text-xs mt-4 text-center",children:"Photo upload coming soon — listings will work without photos for now"})]}),1===c&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-display text-2xl font-bold mb-1",children:"Item details"}),(0,t.jsx)("p",{className:"text-warm-gray text-sm mb-6",children:"What are you getting rid of?"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"Title"}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"e.g., PS5 + 12 Games Bundle",className:"w-full px-4 py-3 bg-white rounded-xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-sm",maxLength:100})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"Description"}),(0,t.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),placeholder:"Details about the item — condition, what's included, etc.",rows:3,className:"w-full px-4 py-3 bg-white rounded-xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-sm resize-none",maxLength:1e3})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[(0,t.jsx)(L.Tag,{className:"w-3.5 h-3.5"})," Category"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:v.CATEGORIES.filter(e=>"All"!==e).map(e=>(0,t.jsx)("button",{onClick:()=>b(e),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${g===e?"bg-hot-pink text-white shadow-sm":"bg-white text-warm-gray border border-near-black/10 hover:border-hot-pink/30"}`,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[(0,t.jsx)(E.MapPin,{className:"w-3.5 h-3.5"})," Village"]}),(0,t.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"w-full px-4 py-3 bg-white rounded-xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-sm appearance-none",children:[(0,t.jsx)("option",{value:"",children:"Select your village"}),v.AREAS.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"Condition"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:v.CONDITIONS.map(e=>(0,t.jsx)("button",{onClick:()=>C(e),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${w===e?"bg-teal text-white shadow-sm":"bg-white text-warm-gray border border-near-black/10 hover:border-teal/30"}`,children:e},e))})]})]})]}),2===c&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(T.Sparkles,{className:"w-5 h-5 text-hot-pink"}),(0,t.jsx)("h2",{className:"font-display text-2xl font-bold",children:"The Story"})]}),(0,t.jsxs)("p",{className:"text-warm-gray text-sm mb-6",children:["This is what makes ExChange special. ",z[Math.floor(Math.random()*z.length)]]}),(0,t.jsx)("textarea",{value:I,onChange:e=>q(e.target.value),placeholder:"He said he needed 'space to figure things out.' Guess what doesn't need space anymore? His gaming setup...",rows:8,className:"w-full px-4 py-3 bg-white rounded-xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-sm resize-none leading-relaxed",maxLength:2e3}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-warm-gray",children:[(0,t.jsx)("span",{children:"Optional, but highly encouraged"}),(0,t.jsxs)("span",{className:I.length>1800?"text-hot-pink":"",children:[I.length,"/2000"]})]})]}),3===c&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-display text-2xl font-bold mb-1",children:"Set your price"}),(0,t.jsx)("p",{className:"text-warm-gray text-sm mb-6",children:"How much is this closure worth?"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(H,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-warm-gray"}),(0,t.jsx)("input",{type:"number",value:D,onChange:e=>{O(e.target.value),W(!1)},placeholder:"0.00",disabled:U,className:"w-full pl-12 pr-4 py-4 bg-white rounded-2xl border border-near-black/10 focus:border-hot-pink/40 focus:ring-2 focus:ring-hot-pink/10 focus:outline-none transition-all text-2xl font-display font-bold disabled:opacity-30",min:"0",step:"1"})]}),(0,t.jsxs)("button",{onClick:()=>{W(!U),U||O("")},className:`w-full p-4 rounded-2xl border-2 text-left transition-all ${U?"border-teal bg-teal/5":"border-near-black/10 hover:border-teal/30"}`,children:[(0,t.jsx)("span",{className:`font-display font-bold ${U?"text-teal":"text-near-black"}`,children:"Free — just take it"}),(0,t.jsx)("p",{className:"text-xs text-warm-gray mt-0.5",children:"Sometimes the best revenge is giving it away"})]})]})]}),4===c&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-display text-2xl font-bold mb-1",children:"Preview"}),(0,t.jsx)("p",{className:"text-warm-gray text-sm mb-6",children:"Here's how your listing will look"}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-near-black/5 overflow-hidden",children:[(0,t.jsx)("div",{className:"aspect-[4/3] bg-gradient-to-br from-hot-pink/10 to-electric-yellow/10 flex items-center justify-center",children:h.length>0?(0,t.jsx)("img",{src:h[0],alt:"",className:"w-full h-full object-cover"}):(0,t.jsx)(R.Heart,{className:"w-16 h-16 text-hot-pink/20"})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"font-display font-bold text-lg",children:x||"Your listing title"}),(0,t.jsx)("span",{className:"font-display font-bold text-hot-pink text-lg",children:U?"Free":D?`$${D}`:"$0"})]}),I&&(0,t.jsxs)("p",{className:"text-warm-gray text-sm italic leading-relaxed mb-3",children:["“",I.slice(0,120),I.length>120?"...":"","”"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-warm-gray",children:[y&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(E.MapPin,{className:"w-3 h-3"})," ",y]}),g&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(L.Tag,{className:"w-3 h-3"})," ",g]}),w&&(0,t.jsx)("span",{children:w})]})]})]})]})]},c)}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-8",children:[c>0&&(0,t.jsx)("button",{onClick:()=>d(c-1),className:"px-5 py-3 rounded-xl border border-near-black/10 text-warm-gray font-medium hover:text-near-black hover:border-near-black/20 transition-colors",children:(0,t.jsx)(N.ArrowLeft,{className:"w-4 h-4"})}),c<A.length-1?(0,t.jsxs)("button",{onClick:()=>d(c+1),disabled:!G(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-near-black text-white rounded-xl font-display font-bold hover:bg-deep-charcoal disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:["Next ",(0,t.jsx)(S,{className:"w-4 h-4"})]}):(0,t.jsx)("button",{onClick:V,disabled:B||!G(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-hot-pink text-white rounded-xl font-display font-bold text-lg shadow-lg shadow-hot-pink/25 hover:bg-hot-pink-dark hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:B?(0,t.jsx)("span",{className:"animate-pulse",children:"Publishing..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Sparkles,{className:"w-5 h-5"})," Publish Listing"]})})]})]})}e.s(["default",()=>I],5857)}]);